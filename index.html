<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Deudas Radio M칩vil</title>
    <link rel="stylesheet" href="style.css">
    <style>
/* Reset y Base */
* { box-sizing: border-box; }
body {
    font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    background-color: #f0f2f5;
    margin: 0;
    padding: 15px;
    display: flex;
    justify-content: center;
    color: #333;
}

.container {
    width: 100%;
    max-width: 480px;
    background: white;
    padding: 20px;
    border-radius: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

h1 { 
    font-size: 1.4rem; 
    text-align: center; 
    color: #1a1a1a;
    margin-bottom: 25px;
}

label {
    display: block;
    margin-bottom: 8px;
    font-size: 0.9rem;
    font-weight: 600;
    color: #666;
}

/* Selector T치ctil */
select {
    width: 100%;
    padding: 16px;
    border-radius: 12px;
    border: 2px solid #eee;
    font-size: 16px; /* Evita zoom autom치tico en iOS */
    background-color: #f9f9f9;
    color: #333;
    outline: none;
    transition: border-color 0.3s;
}

select:focus { border-color: #3498db; }

/* Card de Deuda */
.card {
    margin-top: 25px;
    padding: 20px;
    border-radius: 15px;
    background: #ffffff;
    border-top: 8px solid #e74c3c;
    box-shadow: 0 10px 20px rgba(0,0,0,0.05);
    animation: slideUp 0.4s ease-out;
}

@keyframes slideUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

.card nav { 
    display: flex; flex-direction: row; 
    justify-content: space-between;
    align-items: baseline;
}
.card nav h2 { margin: 0 0 15px 0; font-size: 1.2rem; }
.card nav p { color: #999}

table {
    width: 100%;
    border-collapse: collapse;
}

td {
    padding: 12px 0;
    border-bottom: 1px solid #f0f0f0;
    font-size: 0.95rem;
}

.monto-celda {
    text-align: right;
    font-weight: bold;
}

.total-container {
    margin-top: 20px;
    padding: 15px;
    background: #fff5f5;
    border-radius: 10px;
    text-align: center;
}

.total-label { display: block; font-size: 0.8rem; color: #e74c3c; font-weight: bold; }
.total-monto { font-size: 1.6rem; font-weight: 800; color: #e74c3c; }

/* Bot칩n WhatsApp */
.btn-whatsapp {
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #25d366;
    color: white;
    text-decoration: none;
    padding: 16px;
    border-radius: 12px;
    margin-top: 20px;
    font-weight: bold;
    font-size: 1rem;
    box-shadow: 0 4px 10px rgba(37, 211, 102, 0.3);
}

.btn-whatsapp:active {
    transform: scale(0.96);
    background-color: #1eb956;
}

.placeholder {
    text-align: center;
    color: #999;
    margin-top: 40px;
    font-style: italic;
}
    </style>
</head>
<body>

    <div class="container">
        <h1>Control de Cobros</h1>
        
        <div class="selector-section">
            <label for="cliente-select">Seleccionar M칩vil:</label>
            <select id="cliente-select">
                <option value="">-- Elige un socio --</option>
            </select>
        </div>

        <div id="card-container">
            <p class="placeholder">Selecciona un socio de la lista superior para gestionar sus deudas.</p>
        </div>
    </div>
    <script src="movilesJson.js"></script>
    <script>
const select = document.getElementById('cliente-select');
const container = document.getElementById('card-container');

// Cargar nombres en el select
clientes.forEach(c => {
    const opt = document.createElement('option');
    opt.value = c.id;
    opt.textContent = c.nombre;
    select.appendChild(opt);
});

select.addEventListener('change', (e) => {
    const cliente = clientes.find(c => c.id == e.target.value);
    if (cliente) {
        renderCard(cliente);
    } else {
        container.innerHTML = '<p class="placeholder">Selecciona un cliente de la lista superior para gestionar sus pagos.</p>';
    }
});

function renderCard(c) {
    let total = 0;
    const filas = c.deudas.map(d => {
        total += d.monto;
        return `<tr><td>${d.concepto}</td><td class="monto-celda">$${d.monto.toFixed(2)}</td></tr>`;
    }).join('');

    const mensaje = encodeURIComponent(`Hola ${c.nombre}, te env칤o el detalle de tus deudas pendientes por un total de $${total.toFixed(2)}. Para mas detalle ingresa: https://xxpisesxx.github.io/Multiplijuego/`);
    const linkWa = `https://wa.me/${c.tel}?text=${mensaje}`;

    container.innerHTML = `
        <div class="card">
            <nav>
            <h2>${c.nombre}</h2>
            <p>${c.movil}</p>
            </nav>
            <table><tbody>${filas}</tbody></table>
            <div class="total-container">
                <span class="total-label">TOTAL PENDIENTE</span>
                <span class="total-monto">$${total.toFixed(2)}</span>
            </div>
            <a href="${linkWa}" target="_blank" class="btn-whatsapp">
                游님 Enviar por WhatsApp
            </a>
        </div>
    `;
}
</script>
</body>
  </html>
